<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIDA - Painel de Monitoramento Interativo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/mida.css">
</head>
<body>

    <header class="dashboard-header">
        <div class="header-container">
            <a href="dashboard.html" class="logo"><span id="companyName">MIDA</span></a>
            <nav><a href="dashboard.html" id="signOutBtn" class="btn-sign-out">Voltar</a></nav>
        </div>
    </header>

    <main class="mida-main">
        <div class="mida-toolbar">
            <button id="btnEditMode" class="tool-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
                <span>Ativar Modo Edição</span>
            </button>
            <button id="btnRemoveItem" class="tool-btn delete-btn" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                <span>Remover Item</span>
            </button>
            <div id="statusIndicator" class="status-indicator">
                <div id="statusDot" class="status-dot"></div>
                <span id="statusText">Salvo</span>
            </div>
        </div>

        <div class="mida-body">
            <aside class="mida-sidebar">
                <div>
                    <h3>Gerenciamento</h3>
                    <div class="sidebar-actions">
                        <button id="btnAddEmployee" class="sidebar-btn">Adicionar Funcionário</button>
                        <button id="btnAddCamera" class="sidebar-btn">Adicionar Câmera</button>
                    </div>
                    
                    <div class="asset-list-container">
                        <h4>Câmeras Não Alocadas</h4>
                        <ul id="unassigned-cameras-list" class="asset-list"></ul>
                    </div>
                    <div class="asset-list-container">
                        <h4>Funcionários Não Alocados</h4>
                        <ul id="unassigned-employees-list" class="asset-list"></ul>
                    </div>
                </div>

                <div id="trash-zone" class="trash-zone">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                    <span>Arraste aqui para excluir</span>
                </div>
            </aside>
            <div id="map-container">
                <canvas id="interactive-map"></canvas>
            </div>
        </div>
    </main>

    <!-- MODAL DE ÁREA -->
    <div id="areaModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 id="areaModalTitle">Configurar Área</h3>
            <form id="areaForm">
                <input type="hidden" id="area-id">
                <label for="areaName">Nome da Área:</label>
                <input type="text" id="areaName" required placeholder="Ex: Linha de Produção 1">
                
                <label for="areaColor">Cor da Área:</label>
                <input type="color" id="areaColor" value="#a9c5e8">

                <div class="checkbox-container">
                    <input type="checkbox" id="areaRestricted">
                    <label for="areaRestricted" style="margin: 0; font-weight: normal;">Acesso restrito</label>
                </div>

                <div class="modal-actions">
                    <button type="submit" class="action-btn">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DE FUNCIONÁRIO (ADICIONAR/EDITAR) -->
    <div id="employeeModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 id="employeeModalTitle">Adicionar Funcionário</h3>
            <form id="employeeForm">
                <input type="hidden" id="employee-id">
                <label for="employeeName">Nome do Funcionário:</label>
                <input type="text" id="employeeName" required>

                <div class="checkbox-container" style="margin-top: 15px;">
                    <input type="checkbox" id="employeeIsSupervisor">
                    <label for="employeeIsSupervisor" style="margin: 0; font-weight: normal;">É um supervisor</label>
                </div>
                
                <div class="image-upload-grid">
                    <div class="file-input-wrapper">
                        <label for="imgWithHelmetSmiling">Com capacete, sorrindo</label>
                        <input type="file" id="imgWithHelmetSmiling" class="file-input" accept="image/*">
                        <label for="imgWithHelmetSmiling" class="file-input-label">Escolher arquivo</label>
                        <span class="file-name">Nenhum arquivo</span>
                    </div>
                    <div class="file-input-wrapper">
                        <label for="imgWithHelmetNeutral">Com capacete, neutro</label>
                        <input type="file" id="imgWithHelmetNeutral" class="file-input" accept="image/*">
                        <label for="imgWithHelmetNeutral" class="file-input-label">Escolher arquivo</label>
                        <span class="file-name">Nenhum arquivo</span>
                    </div>
                    <div class="file-input-wrapper">
                        <label for="imgNoHelmetSmiling">Sem capacete, sorrindo</label>
                        <input type="file" id="imgNoHelmetSmiling" class="file-input" accept="image/*">
                        <label for="imgNoHelmetSmiling" class="file-input-label">Escolher arquivo</label>
                        <span class="file-name">Nenhum arquivo</span>
                    </div>
                    <div class="file-input-wrapper">
                        <label for="imgNoHelmetNeutral">Sem capacete, neutro</label>
                        <input type="file" id="imgNoHelmetNeutral" class="file-input" accept="image/*">
                        <label for="imgNoHelmetNeutral" class="file-input-label">Escolher arquivo</label>
                        <span class="file-name">Nenhum arquivo</span>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="submit" id="employeeSubmitBtn" class="action-btn">Adicionar à Lista</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DE CÂMERA (ADICIONAR/EDITAR) -->
    <div id="cameraModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 id="cameraModalTitle">Adicionar Nova Câmera</h3>
            <form id="cameraForm">
                <input type="hidden" id="camera-id">
                <label for="cameraName">Nome/ID da Câmera:</label>
                <input type="text" id="cameraName" required>
                <label for="cameraUrl">URL do Stream (RTSP/HTTP):</label>
                <input type="url" id="cameraUrl" placeholder="Ex: rtsp://192.168.1.10:554/stream1" required>
                <div class="modal-actions">
                    <button type="submit" id="cameraSubmitBtn" class="action-btn">Adicionar à Lista</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DE CONFIRMAÇÃO -->
    <div id="confirmModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <h3 id="confirmTitle">Confirmar Ação</h3>
            <p id="confirmText">Você tem certeza?</p>
            <div class="modal-actions">
                <button type="button" id="btnConfirmCancel" class="action-btn" style="background-color: #6c757d;">Cancelar</button>
                <button type="button" id="btnConfirmOk" class="action-btn" style="background-color: var(--vermelho-perigo);">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="./js/mida.js"></script>
</body>
</html>

